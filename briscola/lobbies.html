<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Briscola</title>
  <meta name="description" content="Briscola">
  <meta name="author" content="1337micro">

</head>

<body>
  
  <div id="lobbies">
    
  </div>

  <script>
    fetch('join').then(response => {
     return response.json()
    })
    .then( (lobbies) => {
      if(lobbies && lobbies.length > 0) {
        document.getElementById('lobbies').innerHTML += '<h1>Current Lobbies: </h1>'
        lobbies.forEach(lobby => {
          const lobbyName = lobby.players[0].name || 'Anonymous';
          document.getElementById('lobbies').innerHTML += `<a href="game.html?gameId=${lobby._id}">Click to join ${lobbyName}'s lobby</a> <br/>`
        })
      }
      else {
        document.getElementById('lobbies').innerHTML += '<h1>No Active Lobbies... Please create a game instead.</h1>'
      }
    }).catch(console.error)
 </script>


</body>
</html>
